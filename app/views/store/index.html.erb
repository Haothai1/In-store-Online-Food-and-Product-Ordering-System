<h1>Store</h1>

<%= form_with(url: store_path, method: :get, local: true) do |form| %>
  <%= form.text_field :query, placeholder: "Search store items...", value: params[:query] %>
  <%= form.submit "Search" %>
<% end %>

<div class="store-items">
  <% @store_items.each do |item| %>
    <div class="store-item">
      <h2><%= item.name %></h2>
      <p><%= item.description %></p>
      <p class="price"><%= number_to_currency(item.price) %></p>
      <p class="stock">In stock: <%= item.stock_quantity %></p>
      <% if product_in_stock?(item) %>
        <%= button_to 'Add to Cart', add_item_cart_path(product_id: item.id), method: :post, class: 'btn btn-primary' %>
      <% else %>
        <%= button_tag 'Out of Stock', class: 'btn btn-secondary', disabled: true %>
      <% end %>
    </div>
  <% end %>
</div>